package com.mygdx.gdx2;

import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.graphics.g2d.TextureAtlas;
import com.badlogic.gdx.scenes.scene2d.InputEvent;
import com.badlogic.gdx.scenes.scene2d.Stage;
import com.badlogic.gdx.scenes.scene2d.ui.Image;
import com.badlogic.gdx.scenes.scene2d.ui.Skin;
import com.badlogic.gdx.scenes.scene2d.ui.Table;
import com.badlogic.gdx.scenes.scene2d.ui.TextButton;
import com.badlogic.gdx.scenes.scene2d.utils.ClickListener;
import com.badlogic.gdx.utils.viewport.Viewport;
import com.mygdx.gdx2.Classes.CardActor;


public class GameStage extends Stage {
  BubbleScreen bubbleScreen;
  TextButton myButton; 
  Image image; 
  Skin skin ; 
  Table table; // a stage commes with a table to add easy 
  CardActor cardActor ; 

  public GameStage(BubbleScreen callingScreen){
    this.bubbleScreen = callingScreen; 
   // setViewport(this.bubbleScreen.view); 
  }

  @Override
  public void draw() {
    super.draw(); 

    skin = new Skin(Gdx.files.internal("json/main.json") , new TextureAtlas("img/ui/white32_pa.atlas") ); 
    
    myButton = new TextButton("Salut les loulou",skin );

    myButton.addListener(new ClickListener(){
    	@Override
    	public void clicked(InputEvent event, float x, float y) {
    	    super.clicked(event,x,y); 
	    Gdx.app.log("MARTIN Stage", "button click"); 
    	}
    });

    
    table = new Table(); 
    table.setFillParent(true);
    
    table.add(myButton);
    cardActor = new CardActor(); 
    table.add(cardActor); 

    this.addActor(table);

  }

  @Override
  public void act(float delta){
    super.act(delta); 
    bubbleScreen.run(delta); 

  }



  @Override 
  public boolean touchDown(int x, int y, int pointer, int button){

    Gdx.app.log("MART", "I touch down GameStage");
    Gdx.app.log("MART", Float.toString(cardActor.getHeight()) );

    bubbleScreen.touchDown(x, y, pointer,button);

    return super.touchDown(x, y, pointer, button); 

  }
    @Override
    public void setViewport(Viewport v)
    {
        //super.setViewport(v);

        //this.getViewport().update(Gdx.graphics.getWidth(), Gdx.graphics.getHeight(), false);
        //bubbleScreen.camera.position.set(Gdx.graphics.getWidth()/2, Gdx.graphics.getHeight()/2, 0);
    }
}
